{"version":3,"sources":["component/Filter.js","component/PersonForm.js","component/Persons.js","component/Notification.js","services/persons.js","index.js"],"names":["Filter","props","value","onChange","event","target","PersonForm","values","onSubmit","name","number","type","Persons","person","removedPerson","style","paddingBottom","onClick","Notification","success_message","error_message","className","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","App","useState","persons","setPersons","newInfo","setNewInfo","filterName","setFilterName","successMessage","setSuccessrMessage","errorMessage","setErrorMessage","useEffect","console","log","personService","initialPersons","newValue","preventDefault","undefined","some","answer","window","confirm","find","n","changedInfo","returnedPerson","map","setTimeout","catch","error","filter","personObject","concat","contact","toLowerCase","includes","i","key","deletedPerson","Object","keys","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b341a788.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = (props) =>{\n  const handleFilter = (event) => {\n    props.onChange(event.target.value)\n  }\n  return(\n    <div>\n     filter shown with: <input  \n            value={props.value}\n            onChange={handleFilter}/>\n    </div>\n  ) \n}\n\nexport default Filter\n","import React from 'react'\n\nconst PersonForm = ({values, onChange, onSubmit}) =>{\n  return (\n    <div>\n      <form onSubmit={onSubmit}>\n        <div>\n          name: \n          <input  \n            value={values.name}\n            name=\"name\"\n            onChange={onChange}/>\n        </div>\n        <div>\n          number: \n          <input  \n            value={values.number}\n            name=\"number\"\n            onChange={onChange}/>\n          </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Persons = ({person,removedPerson}) =>{\n\n  return(\n    <div>\n        \n        <div style={{paddingBottom:'1.5em'}}>{person.name} {person.number} <button onClick={removedPerson}>Delete</button></div>\n        \n    </div>\n   \n  )\n}\n\nexport default Persons\n","import React from 'react'\n\nconst Notification = ({ success_message, error_message }) => {    \n    return (\n        <div>\n            {success_message !== null ?\n            <div className=\"success\">\n                {success_message}\n\n            </div>\n            :\n            <div></div>}\n            {error_message !== null ?\n            <div className=\"error\">\n                {error_message}\n\n            </div>\n            :\n            <div></div>}\n        </div>\n    )\n}\nexport default Notification\n","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nconst deleteId = (id, newObject) => {\n  const request = axios.delete(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\nexport default { getAll, create, update, deleteId }\n","import React, { useState,  useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport Filter from './component/Filter'\nimport PersonForm from './component/PersonForm'\nimport Persons from './component/Persons'\nimport Notification from './component/Notification'\n\nimport personService from './services/persons'\nimport './index.css'\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newInfo, setNewInfo] = useState({\n    name: \"\",\n    number: \"\"\n  })\n  const [filterName, setFilterName] = useState('')\n  const [successMessage, setSuccessrMessage] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n\n  useEffect(() => {\n    console.log('effect')\n    setSuccessrMessage(null)\n    setErrorMessage(null)\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n      \n  }, [])\n  const handleFilter = (newValue)=> {\n    setFilterName(newValue)  \n    \n  }\n  const handleChange = (event) => {\n    const value = event.target.value;\n    setNewInfo({\n      ...newInfo,\n      [event.target.name]: value\n    });\n  }\n  const addPerson = (event) => {\n    event.preventDefault()\n    \n    if(newInfo.name !== undefined){\n      \n      if(persons.some(person => person.name === newInfo.name)){\n        let answer = window.confirm(`${newInfo.name} is already added to phonebook, replace the old number with a new one?`);\n        const person = persons.find(n => n.name === newInfo.name)\n        const changedInfo = { ...person, number: newInfo.number}\n        if(answer === true){\n          personService\n              .update(changedInfo.id, changedInfo)\n              .then(returnedPerson => {\n                setPersons(persons.map(person => person.id !== changedInfo.id ? person : returnedPerson))\n                setSuccessrMessage(`User ${newInfo.name} has changed number to: ${newInfo.number}`)\n                setTimeout(() => {\n                  setSuccessrMessage(null)\n                }, 5000)\n               \n              })\n              .catch(error => {\n                console.log(error)\n                setPersons(persons.filter(person => person.id !== changedInfo.id))\n                setErrorMessage(`Information of ${newInfo.name} has already been removed from server`)\n                setTimeout(() => {\n                  setErrorMessage(null)\n                }, 5000)\n              }) \n        }  \n      } \n      else{\n        const personObject = {\n          name: newInfo.name,\n          number: newInfo.number\n        } \n        personService\n          .create(personObject)\n          .then(returnedPerson => {\n            console.log(\"i\")\n            setPersons(persons.concat(returnedPerson))\n            setNewInfo('')\n            setSuccessrMessage(`Added ${newInfo.name}`)\n            setTimeout(() => {\n              setSuccessrMessage(null)\n            }, 5000)\n    \n          })\n          .catch(error => {\n            console.log(error.response.data.error)\n            setErrorMessage(error.response.data.error)\n          })\n           \n        \n      }\n    }\n  }\n  const removedPerson = id => {\n    const person = persons.find(person => person.id === id)\n    const deletedPerson = { ...person}\n\n    personService\n      .deleteId(id, deletedPerson)\n      .then(returnedPerson => {\n        setPersons(persons.map(person => person.id !== id ? person : returnedPerson).filter(value => Object.keys(value).length !== 0))\n      })\n    \n  }\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification success_message={successMessage} error_message={errorMessage}/>\n      <Filter  value={filterName} onChange={handleFilter}/>\n      <h2>add a new</h2>\n      <PersonForm values={newInfo} onChange={handleChange} onSubmit={addPerson} />  \n      <h2>Numbers</h2>\n      {persons\n        .filter( contact =>contact.name.toLowerCase().includes(filterName)) \n        .map((contact, i) => \n          <Persons\n            key={i}\n            person={contact} \n            removedPerson={() => {if (window.confirm(`Delete ${contact.name} ?`)) removedPerson(contact.id)}}\n          />\n      )}\n        \n    </div>\n  )\n}\n\nReactDOM.render(<App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}